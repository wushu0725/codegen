package ${package}.${backmodule}.controller;

import ${package}.${backmodule}.service.${className}Service;
import org.springframework.web.bind.annotation.*;
import com.alibaba.fastjson.JSONObject;
import ${package}.${common}.Result;


import javax.annotation.Resource;
import java.util.Objects;

@RestController
@RequestMapping("${secondModuleName}")
public class ${className}Controller {

    @Resource
    private ${className}Service ${classname}Service;

    @PostMapping("/save")
    public Result insert(@RequestBody JSONObject requestJson) {
        ${className} obj = JSONObject.parse(requestJson.toJSONString()},${className}.getClass());
        ${classname}Service.saveOrUpdate(obj);
        return Result.ok();
    }

    @PostMapping("/update")
    public Result update(@RequestBody JSONObject requestJson) {
        String pk = requestJson.getString("${id}");
        if(Objects.isNull(${classname}Service.getById(pk))){
            return Result.fail(String.format("%s对象不存在",${classname}))
        }
        ${className} obj = JSONObject.parse(requestJson.toJSONString()},${className}.getClass());
        ${classname}Service.updateById(obj);
        return Result.ok();
    }

    @PostMapping("/delete/{id}")
    public Result delete(@PathVariable(name = "id") String id) {
        String pk = requestJson.getString("${id}");
        if(Objects.isNull(${classname}Service.getById(pk))){
            return Result.fail(String.format("%s对象不存在",${classname}))
        }
        ${classname}Service.delete(${pkType}.valueOf(id))
        return Result.ok();
    }

    @PostMapping("/page")
    public Result page(@RequestBody JSONObject requestJson) {
        return ${classname}Service.page(requestJson);
    }

    @PostMapping("/get/{id}")
    public Result get(@PathVariable(name = "id") String id) {
        return Result.okData(${classname}Service.getById(pk));
    }
}